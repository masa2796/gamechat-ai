# 検索結果カード名から構造化DBで詳細データを取得する仕組みへの変更案

## 概要

現状の検索（構造化DB検索・ベクトル検索・ハイブリッド検索）では、検索結果としてカード名や一部の情報のみが返却されています。
今後は、検索で得られたカード名を用いて、構造化DBから該当カードの詳細なjsonデータを取得し、APIレスポンスとして返却する仕組みに変更します。

将来的には、取得したjsonデータをフロントエンドで一覧表示できるようにします。

---

## 目的
- 検索結果の情報量を増やし、ユーザー体験を向上させる
- フロントエンドでカード詳細の一覧表示や、さらなるUI拡張を可能にする

---

## 仕様案

### 1. 検索フローの変更
- 構造化DB検索・ベクトル検索・ハイブリッド検索の各サービスで、検索結果としてカード名（title等）一覧を取得
- そのカード名リストを用いて、構造化DB（例: data/data.json等）から該当カードの詳細jsonデータを一括取得
- APIレスポンスとして、カード詳細のjsonリストを返却

### 2. 取得データの例
```json
[
  {
    "title": "ピカチュウ",
    "type": "でんき",
    "hp": 60,
    "description": "...",
    ...
  },
  ...
]
```

### 3. フロントエンド対応（将来）
- 取得したjsonリストを一覧形式で描画
- 各カードの詳細表示やフィルタリング、ソート等のUI拡張も可能

---

## 実装タスク例
1. サービス層でカード名リストから構造化DBを再検索するメソッドを追加
2. 検索APIのレスポンス形式を詳細jsonリストに変更
3. テストの修正・追加
4. フロントエンドでの一覧表示（別issueで対応）

---

## 備考
- 構造化DBは現状の`data/data.json`等を想定
- パフォーマンスやキャッシュも考慮し、必要に応じて最適化を検討

---

## 関連
- #検索 #構造化DB #API設計 #フロントエンド #一覧表示
