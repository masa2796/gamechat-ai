# 運用ルール・開発フロー（ドラフト）

> 本ドキュメントは2025年7月時点の現状運用ルールのドラフトです。今後の改善・議論のたたき台とします。

---

## 1. ブランチ戦略

- `main`: 本番環境用。リリース済み安定版のみマージ可。
- `develop`: 開発統合ブランチ。日常的な開発はここにマージ。
- `feature/*`: 新機能・改修ごとに作成。命名例: `feature/llm-response-enhance`
- `hotfix/*`: 緊急修正用。バグ修正や障害対応時のみ。

### 運用上の課題・暫定ルール
- `develop`の肥大化・長期未リリースが発生しやすい → 定期的なリリースサイクル要検討
- `feature/`ブランチの命名・粒度が人によって異なる

---

## 2. レビュー手順

- **Pull Request（PR）作成時**
  - タイトル・説明・関連Issueを明記
  - WIP（作業中）はDraft PRで提出
- **レビュー観点**
  - コード品質（Lint/Format/型チェック）
  - テストカバレッジ
  - セキュリティ・機密情報流出の有無
  - UI/UX（フロントエンド）
- **マージ条件**
  - 原則2名以上のApprove
  - CIテスト通過必須

### 運用上の課題・暫定ルール
- レビュワーのアサインが属人的
- テスト未整備の箇所は目視・手動確認で暫定対応

---

## 3. テスト観点

- **ユニットテスト**: Jest（FE）/pytest（BE）で主要ロジックを網羅
- **統合テスト**: Playwright（E2E）/FastAPI TestClient
- **カバレッジ目標**: 80%以上（未達時は理由をPRに記載）
- **手動テスト**: UI/UXや新規機能は手動確認も実施

### 運用上の課題・暫定ルール
- E2Eテストの一部がCIで不安定 → テスト用アニメーション無効化等で暫定対応
- バックエンドの一部APIはモック・スタブで代替

---

## 4. その他・今後の改善ポイント

- ドキュメント整備の遅れ → 重要な運用ルールは必ずdocs/配下に記載
- セキュリティレビュー・脆弱性チェックの自動化を推進中
- コード規約・型ガイドラインも随時アップデート

---

> ご意見・改善案はIssueまたはPRで歓迎します。
