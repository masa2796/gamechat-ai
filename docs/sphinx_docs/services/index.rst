サービス層API
=============

GameChat AIのサービス層は、システムの核となるビジネスロジックを担当する専門的なサービスクラス群で構成されています。
各サービスは単一責任の原則に基づいて設計され、高度な疎結合と再利用性を実現しています。

.. toctree::
   :maxdepth: 3

  vector_service
   vector_service
   auth_service
   llm_service

アーキテクチャ概要
------------------

サービス層は以下の階層構造で設計されています：

**制御層サービス**
  システム全体の制御と統合を担当

  * (MVPでは統合制御レイヤーを削除し `/chat` 直列処理のみ)

**専門処理サービス**
  特定のドメイン知識を持つ専門サービス

  * **VectorService**: Upstash Vectorによるセマンティック検索
  * **EmbeddingService**: OpenAI Embedding生成

**基盤サービス**
  共通機能とインフラ機能を提供

  * **LLMService**: スタブ/簡易応答生成 (MVP)
  * **AuthService**: (MVP未使用)

設計原則
--------

**単一責任の原則**
  各サービスは一つの明確な責任を持ち、その責任に関連する機能のみを提供

**依存性注入**
  サービス間の依存関係は設定によって注入され、テスタビリティと柔軟性を確保

**非同期処理**
  FastAPIの非同期機能を活用し、高いスループットと応答性を実現

**エラーハンドリング**
  各サービスは適切な例外処理とエラー復旧機能を実装

サービス間連携
--------------

サービス間の連携は以下のパターンで実現されています：

MVPでは単一の `/chat` ハンドラ内で Embedding → Vector → LLM を逐次実行。

パフォーマンス特性
------------------

各サービスのパフォーマンス特性：

MVP段階での計測指標は未確定（正式リリース後に再測定）。
